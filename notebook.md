---
layout: page
title: 每日学习笔记
permalink: /notebook/
---

> 每日的学习笔记，主要用来发布前一天学习的所有理论知识，即每天早上8点30之后可以随时在这里看到之前的一天学习的内容有哪些，也可以看[提交记录](https://github.com/GadHao/gadhao.github.io/commits/master)追溯之前提交过的内容

## 总结[2020.09.21]


## 《深入了解计算机系统》的学习(Page34-Page38)

#### 表示字符串

C语言中字符串被编码为一个以`null`(其值为0)字符结尾的字符数组。每个字符都由某个标准编码来表示，最常见的是ASCII字符码。如果我们以参数`"12345"`(包括终止符)来运行上面的代码，我们得到的结果是`31 32 33 34 35 00`，注意，十进制数字`x`的`ASCII`码正好是`0x3x`，而终止字节的十六进制表示为`0x00`。在使用ASCII码作为字符码的任何系统上都得到相同的效果，与字节顺序喝字大小规则无关。所以，文本数据比二进制数据具有更强的平台独立性。

#### 布尔代数简介

二进制是计算机编码、存储和操作信息的核心。源于1850年前后乔治布尔(George Boole，1815-1864)的工作，产生了丰富的数学知识体系，所以也被称为布尔代数(Boolean algebra)。布尔注意到通过将逻辑值TRUE(真)和FALSE(假)编码为二进制值1和0，能够设计出一种代数，以研究逻辑推理的基本原则。

布尔代数在数字系统的设计和分析中扮演着重要的角色，四个布尔运算符(`&`，`|`，`^`，`~`)可以扩展到位向量的运算，位向量就是固定长度为w、由0和1组成的串。位向量的运算可以定义成参数的每个对应元素之间的运算。假如a和b分别代表两个长度均为w的位向量，我们将a&b也定义为一个长度为w的位向量，其中第i个元素等于*ai&bi*，*0<=i<w*。可以用类似的方式将运算|、^和~扩展到位向量上。

比如w=4，参数a=[0110]，b=[1100]，那么4种运算a&b、a|b、a^b和~b分别得到以下结果

![](\assets\img\CSAPP-25.JPG)

这里有一道练习题：

![](\assets\img\CSAPP-26.JPG)

答案：`10010110`、`10101010`、`01000001`、`01111101`、`00111100`

> 布尔代数和整数运算有很多相似之处，比如，乘法对加法的分配律，写为`a*(b+c)=(a*b)+(a*c)`，而布尔运算`&`对`|`的分配律，写为`a&(b|c)=(a&b)|(a&c)`。此外，布尔运算`|`对`&`也有分配律，写为`a|(b&c)=(a|b)&(a|c)`
>
> 当考虑长度为w的位向量上的`^`，`&`和`~`运算时，会得到一种不同的数学形式，我们称之为*布尔环(Boolean ring)*，布尔环与整数运算有很多相同的属性。比如，整数运算的一个属性是每个值`x`都有一个*加法逆元(additive inverse)*`-x`使得`x+(-x)=0`。布尔环也有类似的属性，这里的"加法"运算是`^`，不过这时每个元素的加法逆元是它自己本身。也就是说，对于任何值`a`来说，`a^a=0`，这里我们用`0`来表示全0的位向量。可以看到对单个位来说这是成立的，即`0^0=1^1=0`，将这个扩展到位向量也是成立的。当我们重新排列组合顺序，这个属性也仍然成立，因此有`(a^b)^a=b`[^1]。这个属性会引起一些很有趣的结果和聪明的技巧，在后面的练习题中会探讨。

位向量一个很有用的应用就是表示有限集合。比如我们用位向量`a:[01101001]`表示集合`A={0,3,5,6}`，而`b:[01010101]`表示集合`B={0,2,4,6}`(注意我们是从位向量的右边往左边看)。使用这种编码集合的方法，布尔运算`|`和`&`分别对应于集合的并和交，而`~`对应集合的补集。比如在前面的例子里，运算`a&b`得到位向量`[01000001]`，而`A∩B={0，6}`，在大量实际应用中，我们都能看到用位向量来对集合编码，在之后也会接触到。

这里有一道练习题

![](\assets\img\CSAPP-27.JPG)

答案：

A.`~黑色 = 白色`，`~红色 = 蓝绿色`，`~蓝色 = 黄色`，`~红紫色 = 绿色`，反过来也是一样

B.`蓝色|绿色 = 001|010 = 011 = 蓝绿色`，`黄色&蓝绿色 = 110&011 = 010 = 绿色`，`红色^红紫色 = 100^101 = 001 = 蓝色`



#### C语言中的位级运算

C语言的一个很有用的特性就是它支持按位布尔运算。事实上，我们在布尔运算中使用的那些符号就是C语言所使用的：

`|`就是`OR(或)`，`&`就是`AND(与)`，`~`就是`NOT(取反)`，`^`就是`EXCLUSIVE-OR(异或)`。这些运算能运用到任何"整型"的数据类型上，这里有一张图，是一些对`char`数据类型表达式求值的例子：

![](\assets\img\CSAPP-28.JPG)

正如图上表示的那样，确定一个位级表达式的结果最好的方法，就是将十六进制的参数扩展成二进制表示并执行二进制运算，然后转换回十六进制

这里还有几道练习题：

![](/assets/img/CSAPP-29.JPG)

答案：

第一步：`a` `a^b`

第二步：`b` `a^b`

第三步：`b` a



![](/assets/img/CSAPP-30.JPG)

答案：

Ａ.从`first`是`0`，`last`是`2k`的时候开始循环，一直到`first<=last`的时候结束，假设到最后`first`的值为`n`，则最后`n=2k-n`的时候结束，所以到最后`first`和`last`的值都是`k`

B.因为此时两个数相同，异或运算的结果均为0

C.把`first<=last`改为`first<last`

位级运算的几个常见算法就是实现掩码运算，这里的掩码指的是一个位模式，表示从一个字中选出的位的集合。比如用掩码`0xFF`表示一个字的低位字节。位级运算`x&0xFF`生成一个由`x`的最低有效字节组成的值，其他的字节就被置为0，比如，对于`x=0x89ABCDEF`，其表达式得到`0x000000EF`，即我们得到了其最低的八位的值。



</br></br></br></br></br></br>

[^1]: 关于这里的异或运算，一开始可能不太理解，首先要明白，异或，就是找出两个位向量里面不同的元素，这里因为每个元素的加法逆元这个属性即使交换之后也成立，所以这里其实相当于`(a^a)^b`，即`b`与`0`相异或，值还是`b`