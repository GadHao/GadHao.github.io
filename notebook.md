---
layout: page
title: 每日学习笔记
permalink: /notebook/
usemathjax: true
---

> 每日的学习笔记，主要用来发布前一天学习的所有理论知识，即每天早上8点30之后可以随时在这里看到之前的一天学习的内容有哪些，也可以看[提交记录](https://github.com/GadHao/gadhao.github.io/commits/master)追溯之前提交过的内容

## 总结[2020.09.26]

## 《深入了解计算机系统》的学习(Page42-Page46)

> 继续学习这一章，书里的信息量还是比较大的，这周又花太多时间在算法上了，学完CSAPP前面部分之后打算系统学习数据结构到算法的相关基础

> C语言标准小心地规避了当位移量大于等于待移位值的位数的情况，实际上位移量会通过计算`k mod w`得到，不过这种行为对于C程序来说是没有保证的，所以应该保持位移量小于待移动位值的位数

> 因为加法(和减法)的优先级比移位运算要高。所以表达式`1<<2+3<<4`等价于`1<<(2+3)<<4`，答案是512

> 思考移位运算的最好方式是使用二进制表示，将最初的值转换为二进制，执行移位运算，然后再转换回十六进制

### 整数表示

接着，我们来学习用位来编码整数的两种不同方式：一种只能表示非负数，而另一种能够表示负数、零和正数。后面我们会看到它们在数学属性和机器级实现方面密切相关，并且还会研究扩展或者收缩一个已编码整数以适应不同长度表示的效果。

这里会涉及到一些数学术语，用于精确定义和描述计算机如何编码和操作整数，这里先把相关的图放在以便之后参考

![](/assets/img/CSAPP-36.JPG)

#### 整数数据类型

C语言支持多种整型数据类型——表示有限范围的整数。每种类型都能用关键字来指定大小，这些关键字包括`char`、`short`、`long`，同时还可以指示被表示的数字是非负数(声明为`unsigned`)，或者可能是负数(默认)。为这些类型分配的字节数根据程序编译为32位还是64位也会有所不同，根据字节分配，不同的大小所能表示的值的范围是不同的。这里唯一一个与机器相关的取值范围是`long`类型的，大多数64位机器使用8个字节的表示，比32位机器上使用的4个字节的表示的取值范围大很多

![](/assets/img/CSAPP-37.JPG)

![](/assets/img/CSAPP-38.JPG)

这里有一个很值得注意的特点是取值范围是不对称的——负数的范围比正数的范围大1，当我们考虑如何考虑负数的时候，会看到为什么会这样

C语言标准定义了每种数据类型必须能够表示的最小的取值范围。它们的取值范围和之前图上的典型实现一样或者小一些。除了固定大小的数据类型是例外，我们看到它们只要求正数和负数的取值范围是对称的。另外`int`可以用2个字节的数字来实现，`long`可以用4个字节的数字来实现

![](/assets/img/CSAPP-39.JPG)

> C和C++都支持有符号(默认)和无符号数。Java只支持有符号数



#### 无符号数的编码

假设有一个整数数据类型有`w`位。我们可以将位向量写成$$ \vec{x}$$，表示整个向量，或者写成$$[x_{w-1},x_{w-2},…,x_0]$$，表示向量中的每一位。把$$ \vec{x}$$看作一个二进制表示的数，就获得了$$ \vec{x}$$的无符号表示。在这个编码中，每个位$$x_i$$都取值为0或1，后一种取值意味着数值$$2^i$$应为数字值的一部分。我们用一个函数$$B2U_w$$(Binary to Unsigned的缩写，长度为w)来表示

![](/assets/img/CSAPP-40.JPG)

在这个等式中，符号"≐"表示左边被定义为等于右边。函数$$B2U_w$$将一个长度为w的0、1串映射到非负整数，比如下面几种情况：

![](/assets/img/CSAPP-41.JPG)

在图中，我们用$$2^i$$的指向右侧箭头的条表示每个位的位置i，每个位向量对应的数值都等于所有值为1的位对应的长度之和

![](/assets/img/CSAPP-42.JPG)

所以，当这个串的长度为w时的取值范围是在它的内容为全0到全1之间的，也就是整数值$$UMax_w≐\sum^{w-1}_{i=0}2^i=2^w-1$$

以4位情况为例，$$UMax_4=B2U_4([1111])=2^4-1=15$$。因此，函数$$B2Uw$$能够被定义为一个映射$$B2U_w:\{0,1\}^w→\{0,…,2^w-1\}$$

无符号的二进制表示有一个很重要的属性，也就是每个介于$$0$$到$$2^w$$-1之间的数都有唯一一个w位的值编码。例如，十进制值11作为无符号数，只有一个四位的表示，即$$[1011]$$。我们用数学原理来重点讲述它，先表述原理再解释。

原理：无符号数编码的唯一性

函数$$B2U_w$$是一个双射，所谓双射是一个数学术语，意思是一个函数$$f$$有两面：它将数值$$x$$映射为数值$$y$$，即$$y=f(x)$$，但它也可以反向操作，因为对每一个$$y$$而言，都有唯一一个数值$$x$$使得$$f(x)=y$$。这可以用反函数$$f^{-1}$$来表示，即$$x=f^{-1}(y)$$，在本例中也是如此，函数$$B2U_w$$将每一个长度为$$w$$的位向量都映射为$$0$$到$$2^w-1$$之间的一个唯一值；反过来，我们称其为$$U2B_w$$(即"无符号数到二进制")，在$$0$$到$$2^w-1$$之间的每一个整数都可以映射为一个唯一的长度为$$w$$的位模式

<br><br><br><br><br><br>