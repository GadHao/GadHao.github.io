---
layout: post
title: 'CLR via C#学习笔记（1）'
date: 2021-04-28
author: HANABI
color: rgb(54,59,64)
tags: 笔记 CLR CSharp
---

> `.NET`的`CLR`和`.NET Core`的`CoreCLR`主体没有太大区别，之前对于这本书的了解程度是在需要的时候去查阅，现在希望能够对其进行一个相对系统，整体的学习



## CLR简介

`CLR`，全名*Common Language Runtime*  ，一般翻译成`公共语言运行时`，所谓运行时，可以对标`Java`生态中的`JVM`，无论是什么编程语言，只要能通过各种编译器编译成托管模块(*managed module*)，就可以通过`CLR`执行，`CLR`为其运行提供了环境，其核心功能包括：内存管理、程序集加载、安全性、异常处理和线程管理等

## 托管模块

托管模块是指通过面向`CLR`的编译器编译的，最后通过`CLR`运行的PE（Portable Executable：可移植执行体）文件

托管模块包括几个部分：

1. **PE32或PE32+头**，这里标识了托管模块可以运行的操作系统版本，以及文件类型（`GUI`，`CUI`或`DLL`），文件生成时间

2. **CLR头**：包含要求的`CLR`版本，一些`flags`，托管模块的入口函数(Main函数)的`MethodDef`元数据token，以及包括模块的元数据、资源、强名称、标志，还有其他一些不太重要的数据项的位置/大小

3. **元数据(metadata)**

描述源代码中定义的类型和成员，以及引用的类型和成员

