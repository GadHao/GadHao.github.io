---
layout: post
title: '制作一个基于.NET的WebApi服务映射工具(1) - Socket基础'
date: 2020-07-29
author: HANABI
color: rgb(59,46,42)
tags: Socket
---

> Socket编程是网络编程中的重中之重，.NET为我们提供了丰富，详细的类库为我们使用C#进行Socket编程提供帮助，这里作为学习，会尽可能使用相对基础的Socket类库，来完成整个程序的构建，首先我们来了解Socket，因为是直接学习Socket，对于更底层的协议不会推进得那么深入彻底，主要是为了直观梳理Socket相关知识

## Socket是什么

### 概念浅析

Socket直译成“孔”或“插座”，作为进程之间的一种通信机制，通常也被称为“套接字”，是用于描述IP地址和端口号的通信链的句柄。

通俗的讲，人与人之间可以通过打电话来进行通信，程序与程序之间要进行通信，互相收发数据，就需要通过Socket来通信，所以不难理解为什么需要描述IP地址和端口号，把电话区号当作IP地址，后面的部分当作端口号，这样构成的一个完整的电话号码，才能和确切的某一个人进行通话，

在这个过程中，协议可以理解成打电话时双方沟通时用的语言，这篇里简单了解，TCP协议是面向连接的，是流式(STREAM)的，每次传输都需要建立三次握手，确保通信过程不会出现数据丢失

UDP协议是无连接的，是数据报式(DATAGRAM)的，不安全(丢失，顺序混乱，在接收端要分析重排及要求重发)，但效率高，在传输视频的时候通常使用UDP

### 一般应用模式

1.	服务端Socket开始监听端口，负责监听客户端连接信息
2.	客户端Socket连接服务端指定端口
3.	服务端监听到客户端连接，创建Connection Socket(负责和客户端通信的Socket)，开始进行通信

也就是说，在这个过程中，这里服务端有两个Socket，一个负责监听，一个负责通信，客户端从始至终只有一个Socket

> 这里通过打电话的例子，也有助于快速理解，通话双方都需要有电话(Socket)，通过电话号码(IP+端口号)呼叫对方，建立连接，开始通话

### 使用C#的Socket类进行Socket通信

这里直接上手写代码，之后会回来补上流程图和介绍等