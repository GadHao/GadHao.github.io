---
layout: post
title: '数据库范式学习笔记'
date: 2020-07-14
author: HANABI
color: rgb(54,59,64)
tags: 地基系列 DBMS
---

> 了解数据库范式，作为关系数据库表设计的理论基础之一，主要学习了知乎上的文章——[数据库第一二三范式到底在说什么？](https://zhuanlan.zhihu.com/p/20028672)，这篇只是重新整理归纳，同时作为个人梳理思路，大部分内容和示例来自该文章

## 范式

### 什么是范式

数据库的范式(normal forms)，在讨论时通常被缩写成NF，指的是关系数据库内部数据联系的合理化程度，文中[^1]总结为**一张表的表结构所符合的某种设计标准的级别**，级别从低到高分1NF，2NF，3NF，BCNF，4NF，5NF。在日常关系数据库设计中，通常最多考虑到BCNF就足够，至于为什么，在了解完范式之后，会在文章后面进一步讨论**反范式**

### 第一范式(1NF)

先看定义和结论：**符合1NF的关系中的每个属性都不可再分**，也就是说，如果一张表是符合1NF的，那么其每个字段都是独立的，没有包含其它字段的，**所有关系型数据库系统(RDBMS)的表设计，都是符合1NF的**，看图可以理解：

**不符合1NF的表设计**：

<table>
    <tr>
        <th rowspan="2">编号</th>
        <th rowspan="2">品名</th>
        <th colspan="2">进货</th>
        <th colspan="2">销售</th>
        <th rowspan="2">备注</th>
    </tr>
    <tr>
        <th>数量</th>
        <th>单价</th>
        <th>数量</th>
        <th>单价</th>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
</table>

**符合1NF的表设计**：

| 编号 | 品名 | 进货数量 | 进货单价 | 销售数量 | 销售单价 | 备注 |
| ---- | ---- | -------- | -------- | -------- | -------- | ---- |
|      |      |          |          |          |          |      |

### 第二范式(2NF)

直接来看这个表：

| 学号  | 姓名 | 系名     | 系主任 | 课名         | 分数 |
| ----- | ---- | -------- | ------ | ------------ | ---- |
| 95001 | 李勇 | 数学系   | 张清玫 | 复变函数     | 80   |
| 95001 | 李勇 | 数学系   | 张清玫 | 大学英语     | 90   |
| 95001 | 李勇 | 数学系   | 张清玫 | 数学分析     | 70   |
| 95002 | 刘晨 | 计算机系 | 刘逸   | 数据结构     | 65   |
| 95002 | 刘晨 | 计算机系 | 刘逸   | Java程序设计 | 90   |
| 95002 | 刘晨 | 计算机系 | 刘逸   | 数据库原理   | 65   |
| 95003 | 王敏 | 数学系   | 张清玫 | 复变函数     | 80   |
| 95003 | 王敏 | 数学系   | 张清玫 | 红楼梦赏析   | 85   |

**2NF在1NF的基础上，消除了非主属性对于码的部分函数依赖**



**函数依赖**：若在一张表中，在属性(或属性组)X的值确定的情况下，必然能确定属性Y的值，就可以说Y函数依赖与X

函数依赖又分三种：

*完全函数依赖*：在一个属性的值确定的情况下，必然能确定属性Y的值

*部分函数依赖*：在大于一个属性(即一个属性组)的值确定的情况下，必然能确定属性Y的值

*传递函数依赖*：假如Z函数依赖于Y，且Y函数依赖于X，则Z传递依赖于X



**主属性，非主属性，码**

码是一个概念，若X为表中的一个属性或属性组，若除X之外所有的属性都**完全**函数依赖与X，则X就是这个表的码，一个表可以有多个码

主属性/非主属性：包含在任意一个码中的属性称为主属性，不包含在任何一个码中的属性称为非主属性



**现在让我们来分析上方表的内部关系**





## 反范式





[^1]:文中均指的文章一开头说明的知乎文章