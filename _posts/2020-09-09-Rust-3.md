---
layout: post
title: 'Rust学习笔记(3) - 结构体'
date: 2020-09-09
author: HANABI
color: rgb(59,46,42)
tags: Rust
---

> struct，或者 structure，是一个自定义数据类型，允许命名和包装多个相关的值，从而形成一个有意义的组合，就像面向对象语言中，一个对象中的各个属性

## 定义、实例化、使用结构体

这里展示如何定义并且实例化一个结构体，然后对结构体的字段内容进行调整，并输出到控制台。另外还演示了如何用函数处理具有重复字段值的结构体的初始化，以及使用一个已有的结构体实例的字段来快速初始化一个新的结构体实例：

```rust
#[derive(Debug)]
struct User {
    username: String,
    email: String,
    sign_in_count: u64,
    active: bool,
}

fn build_user(email: String, username: String) -> User {
    User {
        email,
        username,
        active: true,
        sign_in_count: 1,
    }
}

fn main() {
    let mut new_user1 = build_user(
        String::from("narancia@86.outlook.com"),
        String::from("用户名"),
    );

    let new_user2 = User {
        sign_in_count: 66,
        ..new_user1
    };

    new_user1.username = String::from("用户名");
    new_user1.email = String::from("narancia@86.outlook.com");
    println!("{:#?}", new_user1);
    // User {
    //     username: "用户名",
    //     email: "narancia@86.outlook.com",
    //     sign_in_count: 1,
    //     active: true,
    // }

    println!("{:#?}", new_user2);
    // User {
    //     username: "用户名",
    //     email: "narancia@86.outlook.com",
    //     sign_in_count: 66,
    //     active: true,
    // }
}
```

